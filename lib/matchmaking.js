"use strict";

const fs = require('fs')
let settings = JSON.parse(fs.readFileSync('./src/settings.json'))
const path = './src/database/client-user.json'
let intev

function match(jid, isSkip = false) {
     const a = ['Matching\x20w', 'jid', '1YLJSQq', 'ync', 'Success!', 'Time\x20out\x20o', '14YkBGeK', '4zDSaVX', '8962IJjFif', 'findIndex', '289902EAUiES', 'Sudah\x20masu', 'length', 'readFileSy', '10crwBhb', 'writeFileS', 'push', '997IrnrPs', 'client1', 'parse', 'includes', 'splice', '717426nlfBgp', '181024BazNgb', 'stringify', 'client2', '780734dgMLPC', 'indexOf', 'ith\x20', '53502RiQiCF', 'map', 'sesi\x20telah', '1048XlnDxP', 'f\x20range']; function b(c, d) { c = c - 0xaf; let e = a[c]; return e; } (function (c, d) { const q = function (c, d) { return b(d - '0x1b0', c); }; while (!![]) { try { const e = parseInt(q(0x25e, 0x264)) * parseInt(q('0x287', 0x277)) + -parseInt(q('0x285', 0x280)) * -parseInt(q(0x278, 0x268)) + -parseInt(q(0x25e, '0x26e')) * -parseInt(q(0x273, '0x26d')) + parseInt(q(0x27d, '0x27d')) + parseInt(q(0x276, '0x27c')) + -parseInt(q(0x273, '0x26c')) * -parseInt(q('0x267', 0x261)) + -parseInt(q(0x282, 0x274)) * parseInt(q(0x271, '0x270')); if (e === d) break; else c['push'](c['shift']()); } catch (f) { c['push'](c['shift']()); } } }(a, 0x94e68)); return new Promise((c, d) => { const r = function (c, d) { return b(d - '0x125', c); }; let e = JSON[r(0x1ed, 0x1ee)](fs[r('0x1eb', '0x1e8') + 'nc'](path)), f = e[r('0x1d6', 0x1d7)](h => h[r('0x1e2', '0x1ed')]), g = e[r(0x1cc, '0x1d7')](h => h[r('0x1f6', '0x1f4')]); e['map'](h => { const s = function (c, d) { return r(d, c - '0x13c'); }; h['client1'] === undefined && no_client1[s('0x327', '0x325')]({ 'jid': h[s(0x329, '0x32e')], 'index': f[s(0x310, 0x311)](h['client1']) }); }); if (f[r('0x1ea', '0x1ef')](jid)) return d({ 'status': ![], 'message': r('0x1e7', 0x1e6) + 'k\x20sesi\x20mat' + 'ch' }); if (!f['includes'](jid) && g[r('0x1df', '0x1ef')](jid)) return d({ 'status': ![], 'message': r(0x1d2, 0x1d8) + '\x20dimulai' }); if (!f[r(0x1e2, 0x1ef)](jid) && !g[r(0x1fe, 0x1ef)](jid)) { let h = [], i = e[r(0x1dd, 0x1d7)](j => j[r(0x1f2, 0x1ed)]); e[r('0x1d5', 0x1d7)](j => { const t = function (c, d) { return r(c, d - 0x32c); }; j[t('0x51e', 0x520)] === null && h[t('0x51b', '0x517')]({ 'jid': j['client1'], 'index': i[t(0x4fd, '0x500')](j['client1']) }); }); if (isSkip && h[r(0x1f5, 0x1e7)] > 0x0) c({ 'status': !![], 'jid': h[0x0][r(0x1e5, '0x1dc')], 'index': h[0x0]['index'] }); if (h['length'] > 0x0) { let j = JSON['parse'](fs[r('0x1f6', '0x1e8') + 'nc'](path)); j[h[0x0]['index']]['status'] = !![], j[h[0x0]['index']][r('0x1ff', '0x1f4')] = jid, fs[r('0x1f9', '0x1ea') + 'ync'](path, JSON[r(0x1f4, 0x1f3)](j, null, 0x5)), c({ 'status': !![], 'message': r(0x1d0, 0x1db) + r('0x1c7', '0x1d5') + h[0x0][r('0x1e0', '0x1dc')], 'target': h[0x0][r(0x1dd, '0x1dc')] }); } else { let k = 0x1, l = { 'status': ![], 'client1': jid, 'client2': null }; e[r('0x1df', '0x1eb')](l), fs[r('0x1fa', 0x1ea) + r('0x1d2', '0x1de')](path, JSON[r('0x200', '0x1f3')](e, null, 0x5)), intev = setInterval(() => { const u = function (c, d) { return r(d, c - 0x354); }; k++; let m = JSON['parse'](fs['readFileSy' + 'nc'](path)), n = m[u('0x538', 0x538)](o => o[u('0x541', 0x531)] == jid); (n !== -0x1 ? m[n][u('0x548', '0x545')] : null) !== null && (clearInterval(intev), c({ 'status': !![], 'code': 0xc8, 'message': u('0x533', '0x543'), 'target': m[n][u(0x548, '0x54f')] })); if (k > settings['maxMatch']) { clearInterval(intev); let o = h[u('0x538', 0x52a)](p => p[u(0x530, 0x530)] == jid); h['splice'](o, 0x1), m[u('0x544', '0x543')](n, 0x1), fs['writeFileS' + u(0x532, 0x52e)](path, JSON[u('0x547', '0x53a')](m, null, 0x5)), d({ 'status': ![], 'message': u(0x534, 0x52f) + u(0x52e, '0x526') }); } }, 0x3e8); } } });
}

function stop(jid) {
     const a = ['115ewIGTo', '1311460fOoWst', 'parse', '1233306DpPsaY', '1362204efmjlJ', 'readFileSy', '1mOxAVT', '7745brdIlJ', 'includes', '1wfgJri', 'client2', '230374EHxndL', 'und\x20in\x20db', 'tidak\x20ada\x20', '346642vcRQSx', 'Jid\x20not\x20fo', 'client1', '1IgnWqr', 'findIndex', '445894HHuiuk', 'sesi!']; (function (c, d) { const k = function (c, d) { return b(c - -0x1c0, d); }; while (!![]) { try { const e = -parseInt(k(-0xee, -'0xf6')) * parseInt(k(-0xeb, -0xe2)) + parseInt(k(-0xf5, -0xf3)) * -parseInt(k(-'0xe7', -'0xec')) + parseInt(k(-0xe9, -0xed)) + parseInt(k(-0xe6, -0xf1)) + parseInt(k(-0xf1, -0xfa)) * parseInt(k(-'0xf6', -'0xf0')) + -parseInt(k(-'0xf8', -0xf2)) * -parseInt(k(-'0xf3', -0xf3)) + -parseInt(k(-0xe4, -'0xea')); if (e === d) break; else c['push'](c['shift']()); } catch (f) { c['push'](c['shift']()); } } }(a, 0xd6acd)); function b(c, d) { c = c - 0xc8; let e = a[c]; return e; } return new Promise((c, d) => { const l = function (c, d) { return b(d - '0x244', c); }; let e = JSON[l(0x323, '0x31f')](fs[l(0x30a, 0x30d) + 'nc'](path)), f = e['map'](i => i['client1']), g = e['map'](i => i[l(0x309, '0x312')]); if (!f[l(0x30d, '0x310')](jid) && !g[l(0x316, '0x310')](jid)) return d({ 'status': ![], 'message': l('0x310', '0x315') + l(0x326, 0x31c) }); let h = null; f[l(0x319, '0x310')](jid) ? h = e['findIndex'](j => j[l('0x323', 0x318)] == jid) : h = e[l('0x324', '0x31a')](j => j[l('0x318', 0x312)] == jid), h === -0x1 ? d({ 'status': ![], 'message': l(0x316, '0x317') + l(0x313, 0x314) }) : (clearInterval(intev), c({ 'status': !![], 'message': 'Success\x20st' + 'op', 'index': h, 'db': e, 'target': f[l('0x316', 0x310)](jid) ? e[h][l(0x31d, '0x312')] : e[h][l(0x30f, 0x318)] })); });
}


function isMatched(jid) {
     const a = ['152995lcJjzi', 'lam\x20matchm', '1lnKPhB', 'findIndex', '203735HRZSKf', '1yiaDOL', 'includes', '9HpecBB', '87689PuGDxP', 'pun\x20chat', 'client1', 'Tidak\x20dida', '72208nkhwKg', '67HjIFYg', 'Sedang\x20dal', 'alam\x20Chat', '5851DUItRk', 'map', '11532OFvBeA', 'aking\x20atau', 'Sedang\x20Did', 'readFileSy', 'tchmaking', 'am\x20sesi\x20ma', '2578QSLBaH', '1RzXvpm', 'client2']; function b(c, d) { c = c - 0x99; let e = a[c]; return e; } const h = function (c, d) { return b(d - -'0x2a1', c); }; (function (c, d) { const g = function (c, d) { return b(c - -'0x115', d); }; while (!![]) { try { const e = parseInt(g(-0x69, -0x6c)) + -parseInt(g(-'0x6b', -'0x61')) * parseInt(g(-'0x65', -0x6f)) + parseInt(g(-0x68, -'0x69')) * parseInt(g(-0x76, -'0x69')) + -parseInt(g(-'0x6f', -0x77)) * -parseInt(g(-'0x6d', -'0x68')) + parseInt(g(-0x66, -'0x6b')) * -parseInt(g(-0x78, -'0x82')) + parseInt(g(-0x7b, -'0x87')) * -parseInt(g(-0x70, -'0x67')) + parseInt(g(-0x7c, -'0x83')); if (e === d) break; else c['push'](c['shift']()); } catch (f) { c['push'](c['shift']()); } } }(a, 0x1f1a4)); let db_user = JSON['parse'](fs[h(-'0x1f7', -'0x1ff') + 'nc'](path)), user1 = db_user['map'](c => c[h(-'0x1f2', -'0x1ef')]), user2 = db_user[h(-'0x1fd', -'0x203')](c => c[h(-0x1ee, -0x1fa)]); if (user1[h(-'0x1fd', -0x1f3)](jid)) { const index_user = db_user[h(-0x1eb, -0x1f6)](c => c['client1']); return db_user[index_user]['status'] ? { 'status': !![], 'message': h(-0x1f4, -'0x200') + h(-'0x209', -0x205), 'type': 0x1 } : { 'status': !![], 'message': 'Sedang\x20dal' + h(-'0x209', -'0x1fd') + h(-0x20a, -'0x1fe'), 'type': 0x1 }; } else { if (user2['includes'](jid)) { const index_user2 = db_user[h(-'0x1f1', -0x1f6)](c => c[h(-0x1ec, -'0x1fa')]); return db_user[index_user2]['status'] ? { 'status': !![], 'message': h(-0x1ff, -'0x200') + 'alam\x20Chat', 'type': 0x2 } : { 'status': !![], 'message': h(-0x1fc, -0x206) + 'am\x20sesi\x20ma' + 'tchmaking', 'type': 0x2 }; } else return { 'status': ![], 'message': h(-'0x1eb', -'0x1ee') + h(-'0x1f3', -'0x1f8') + h(-'0x20a', -'0x201') + h(-'0x1f3', -'0x1f0') }; }
}

module.exports = { match, stop, isMatched }